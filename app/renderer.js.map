{
  "version": 3,
  "file": "renderer.js",
  "sourceRoot": "../src/",
  "sources": [
    "renderer.coffee"
  ],
  "names": [],
  "mappings": "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",
  "sourcesContent": [
    "'use strict'\r\n{desktopCapturer} = require 'electron'\r\nquickconnect = require 'rtc-quickconnect'\r\nopts =\r\n  room: 'buddy'\r\n  signaller: 'http://192.168.0.2:3000'\r\ndcs = []\r\nwindow.sendMessage = ->\r\n  messageElm = document.querySelector 'input[type=text]'\r\n  message = messageElm.value\r\n  messageElm.value = ''\r\n  messages = document.querySelector '.messages'\r\n  messages.innerHTML += 'me: ' + message + '\\n'\r\n  dcs.forEach (dc) ->\r\n    dc.send message\r\ndesktopCapturer.getSources\r\n  types: ['screen', 'window']\r\n, (err, sources) ->\r\n  console.log sources\r\n  handleEvents = (id, _dc) ->\r\n    console.log 'channel opened', id\r\n    dcs.push _dc\r\n    _dc.onmessage = (event) ->\r\n      messages = document.querySelector '.messages'\r\n      messages.innerHTML += 'you: ' + event.data + '\\n'\r\n  navigator.mediaDevices.getUserMedia\r\n    audio: false\r\n    video: true\r\n  .then (stream) ->\r\n    console.log 'stream', stream\r\n    quickconnect opts.signaller,\r\n      room: opts.room\r\n      plugins: []\r\n    .createDataChannel 'events'\r\n    .addStream stream\r\n    .on 'call:started', (id, pc, data) ->\r\n      video = document.createElement 'video'\r\n      document.querySelector '.videos'\r\n      .appendChild video\r\n      video.srcObject = pc.getRemoteStreams()[0]\r\n      video.onloadedmetadata = (e) ->\r\n        video.play()\r\n    .on 'channel:opened:events', handleEvents\r\n  , (err) ->\r\n    desktopCapturer.getSources \r\n      types: ['screen', 'window']\r\n    , (err, sources) ->\r\n      navigator.mediaDevices.getUserMedia\r\n        audio: false\r\n        video:\r\n          mandatory:\r\n            chromeMediaSource: 'desktop'\r\n            chromeMediaSourceId: sources[4].id\r\n      .then (stream) ->\r\n        quickconnect opts.signaller,\r\n          room: opts.room\r\n          plugins: []\r\n        .createDataChannel 'events'\r\n        .addStream stream\r\n        .on 'call:started', (id, pc, data) ->\r\n          video = document.createElement 'video'\r\n          document.querySelector '.videos'\r\n          .appendChild video\r\n          video.srcObject = pc.getRemoteStreams()[0]\r\n          video.onloadedmetadata = (e) ->\r\n            video.play()\r\n        .on 'channel:opened:events', handleEvents"
  ]
}